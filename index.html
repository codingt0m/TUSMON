<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TUSMON</title>
    <link rel="icon" href="./ressources/favicon.ico" type="image/x-icon">
    
    <link rel="stylesheet" href="index.css">
</head>
<body>
 
    <h1 onclick="handleLogoClick()" title="Retour au menu">TUS<span class="white-text">MON</span></h1>

    <div id="status-area">Chargement du Pok√©dex...</div>

    <div id="menu-screen">
        <div id="menu-layout-grid">
            
            <div class="layout-column col-left">
                <div id="leaderboard-section" class="menu-card">
                    <div id="auth-section">
                        <button id="btn-twitter-login" class="menu-btn">
                            Se connecter avec Twitter
                        </button>
                        <p id="user-info" style="display:none;"></p>
                        
                        <div id="btn-logout" onclick="logout()" style="display:none; cursor:pointer; color:#888; font-size:0.75rem; text-decoration:underline; margin-top:8px; text-align:center;">
                            Se d√©connecter
                        </div>
                    </div>

                    <div class="leaderboard-separator"></div>

                    <div class="menu-title">Classement du Jour üèÜ</div>
                    <div id="leaderboard-date" style="text-align:center; font-size:0.85rem; color:#888; margin-bottom:2px; margin-top:-5px; font-style: italic;"></div>

                    <div id="leaderboard-container">
                        <p style="text-align:center; color:#666; font-size:0.8rem;">Chargement...</p>
                    </div>

                    <div class="leaderboard-separator"></div>

                    <div class="menu-title" style="margin-top: 15px; font-size: 1.1rem; color: #f0b230;">Top Endurance (Hebdo) üî•</div>
                    <div id="weekly-date" style="text-align:center; font-size:0.8rem; color:#888; margin-bottom:5px; font-style: italic;"></div>

                    <div id="weekly-leaderboard-container">
                        <p style="text-align:center; color:#666; font-size:0.8rem;">Chargement...</p>
                    </div>
                </div>
            </div>

            <div class="layout-column col-center">
                
                <div class="menu-card">
                    <div class="menu-section-inner">
                        <div class="menu-title">D√©fi Quotidien</div>
                        <p style="text-align:center; margin:0 0 10px; color:#aaa; font-size:0.9rem;">Le m√™me Pok√©mon pour tout le monde !</p>
                        <button id="btn-daily-start" class="menu-btn daily" onclick="startDailyGame()">JOUER AU POK√âMON DU JOUR</button>
                    </div>
                </div>

                <div class="menu-card">
                    <div class="menu-section-inner">
                        <div class="menu-title">D√©fi Endurance</div>
                        <p style="text-align:center; margin:0 0 10px; color:#aaa; font-size:0.9rem;">Encha√Æne les victoires sans perdre !</p>
                        
                        <div style="display:flex; justify-content:center; margin-bottom:5px;">
                            <span id="streak-counter" style="display:none;">Endurance actuelle : 0</span>
                        </div>

                        <button id="btn-streak-start" class="menu-btn streak" onclick="startStreakGame()">D√âMARRER L'ENDURANCE</button>
                    </div>
                </div>

                <div class="menu-card">
                    <div class="menu-section-inner">
                        <div class="menu-title">Mode Al√©atoire</div>
                        <p style="text-align:center; margin:0 0 10px; color:#aaa; font-size:0.9rem;">S√©lectionnez les g√©n√©rations :</p>
                        
                        <div style="text-align: center;">
                            <button class="mini-btn" onclick="selectAllGens()">Tout cocher</button>
                        </div>

                        <div id="gen-filters"></div>
                        <button class="menu-btn random" onclick="startRandomGame()">JOUER EN AL√âATOIRE</button>
                    </div>
                </div>

            </div>

            <div class="layout-column col-right">
                <div id="admin-section" class="menu-card admin-highlight" style="display:none;">
                    <div class="menu-section-inner">
                        <div class="menu-title" style="color: #ffd700;">Administration</div>
                        <p style="text-align:center; color:#aaa; font-size:0.8rem; margin-bottom:10px;">Gestion du jeu et des scores.</p>
                        <button id="btn-admin-panel" class="menu-btn admin-btn" onclick="showAdminPanel()">OUVRIR LE PANEL üõ†Ô∏è</button>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div id="gen-popup">
        <img id="gen-img" src="" alt="Image G√©n√©ration">
    </div>

    <div id="game-area">
        <div id="info-bar">
            <div id="mode-badge">POK√âMON DU JOUR</div>
            
            <div id="ingame-timer-display"></div>
            <div id="ingame-score-display"></div>
            
            <div id="hint-box">
                <div id="hint-gen" class="hint-tag" onmouseenter="showGenPopup()" onmouseleave="hideGenPopup()">
                    <span class="hint-label" id="lbl-gen">G√âN:</span><span class="hint-value" id="val-gen"></span>
                </div>
                <div id="hint-stage" class="hint-tag"><span class="hint-label">STADE:</span><span class="hint-value" id="val-stage"></span></div>
                <div id="hint-type" class="hint-tag"><span class="hint-label">TYPE:</span><span class="hint-value" id="val-type"></span></div>
            </div>
        </div>

        <div id="board"></div>
        
        <img id="pokemon-result-image" src="" alt="Pok√©mon">
        
        <div id="message"></div>
        
        <div id="keyboard-cont"></div>
        
        <div id="controls">
            <div class="controls-row">
                <button id="menu-return-btn" class="action-btn" onclick="showMenu()">Menu</button>
                <button id="validate-btn" class="action-btn" onclick="checkGuess()">Valider</button>
                <button id="share-btn" class="action-btn" onclick="shareDailyResult()">Partager sur Twitter</button>
                
                <button id="next-streak-btn" class="action-btn" onclick="nextStreakLevel()" style="display:none;">Pok√©mon Suivant ‚û°</button>
                
                <button id="restart-btn" class="action-btn" onclick="restartCurrentMode()">Rejouer</button>
            </div>

            <div class="controls-row secondary">
                <button id="giveup-btn" class="action-btn" onclick="giveUp()">Abandonner</button>
            </div>
        </div>
    </div>

    <div id="admin-screen" style="display:none;">
        <h1 onclick="closeAdminPanel()" style="cursor:pointer; margin-bottom: 20px;" title="Retour au menu principal">
            TUS<span class="white-text">MON</span>
            <span style="display:block; font-size: 1rem; color: #888; letter-spacing: 5px; margin-top: -5px; text-transform: uppercase;">ADMINISTRATION</span>
        </h1>

        <div class="menu-card admin-popup-card">
            <div class="menu-section">
                <div class="menu-title">Connexion</div>
                <p style="text-align:center; color:#ddd; margin:0;">
                    Connect√© en tant que :<br> 
                    <strong style="color:var(--correct); font-size:1.1rem;">@suedlemot</strong>
                </p>
            </div>

            <div class="menu-section" style="border-top: 1px solid #333; margin-top: 15px; padding-top: 15px;">
                <div class="menu-title" style="color: #f0b230;">Zone de Test</div>
                <p style="text-align:center; font-size:0.85rem; color:#aaa; margin-bottom:10px;">
                    Lancer une partie avec un ID sp√©cifique
                </p>
                
                <input type="number" id="admin-poke-id" class="admin-input" placeholder="Entrer ID Pok√©mon">
                
                <button class="menu-btn" onclick="startTestGame()" style="background-color: #f0b230; color: #000;">
                    LANCER LE TEST
                </button>
            </div>

            <div class="menu-section" style="border-top: 1px solid #333; margin-top: 15px; padding-top: 15px;">
                <div class="menu-title">Gestion Joueurs</div>
                <p style="text-align:center; font-size:0.85rem; color:#aaa; margin-bottom:10px;">
                    Autoriser un joueur √† rejouer (Supprime son score du jour)
                </p>
                
                <input type="text" id="admin-reset-uid" class="admin-input" placeholder="Coller l'UID du joueur">
                
                <button class="menu-btn" onclick="resetPlayerDaily()" style="background-color: #d9534f;">
                    R√âINITIALISER JOUEUR ‚Ü∫
                </button>
            </div>

            <div class="menu-section" style="margin-top: 20px;">
                <button class="action-btn" onclick="closeAdminPanel()" style="width:100%; background-color: var(--btn-neutral);">
                    RETOUR AU MENU PRINCIPAL
                </button>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <script src="config.js"></script>
    <script src="script.js"></script>

</body>
</html>